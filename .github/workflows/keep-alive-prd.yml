name: Keep-Alive Backend PRD

on:
  schedule:
    # Madrugada: 00:00-01:00 (a cada 5 minutos)
    - cron: "*/5 0 * * *"
    # ManhÃ£/Tarde/Noite: 10:00-23:55 (a cada 5 minutos)
    - cron: "*/5 10-23 * * *"
  workflow_dispatch: # Permite executar manualmente

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Backend PRD
        run: |
          echo "ğŸ”„ Pingando Backend PRD..."
          response=$(curl -s -o /dev/null -w "%{http_code}" https://ohana-api-prd.onrender.com/api/ping)
          echo "ğŸ“¡ Status: $response"

          if [ $response -eq 200 ]; then
            echo "âœ… Backend PRD estÃ¡ ativo!"
          else
            echo "âš ï¸ Backend PRD retornou status: $response"
            exit 1
          fi

      - name: Exibir horÃ¡rio
        run: |
          echo "ğŸ• Ping executado em: $(date -u +"%Y-%m-%d %H:%M:%S UTC")"
          echo "ğŸ• HorÃ¡rio Brasil: $(TZ=America/Sao_Paulo date +"%Y-%m-%d %H:%M:%S %Z")"
