name: Keep-Alive Backend PRD

# ‚ö†Ô∏è WORKFLOW DESABILITADO
# Motivo: Migrado para UptimeRobot (ping a cada 10 minutos, mais confi√°vel)
# Data: 18/02/2026
# GitHub Actions Free Tier tem delays imprevis√≠veis (15-20 min), causando cold starts
# UptimeRobot Free garante execu√ß√£o precisa a cada 10 minutos

on:
  # schedule:
  #   # 00:00-01:00 BRT = 03:00-04:00 UTC (madrugada)
  #   - cron: "*/4 3 * * *"
  #   
  #   # 10:00-23:59 BRT = 13:00-02:59 UTC (manh√£/tarde/noite)
  #   # Parte 1: 10:00-20:00 BRT = 13:00-23:00 UTC
  #   - cron: "*/4 13-23 * * *"
  #   
  #   # Parte 2: 21:00-23:59 BRT = 00:00-02:59 UTC (dia seguinte)
  #   - cron: "*/4 0-2 * * *"
    
  workflow_dispatch: # Permite executar manualmente para testes

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Backend PRD
        run: |
          echo "üîÑ Pingando Backend PRD..."
          response=$(curl -s -o /dev/null -w "%{http_code}" https://ohana-api-prd.onrender.com/api/ping)
          echo "üì° Status: $response"

          if [ $response -eq 200 ]; then
            echo "‚úÖ Backend PRD est√° ativo!"
          else
            echo "‚ö†Ô∏è Backend PRD retornou status: $response"
            exit 1
          fi

      - name: Exibir hor√°rio
        run: |
          echo "üïê Ping executado em: $(date -u +"%Y-%m-%d %H:%M:%S UTC")"
          echo "üïê Hor√°rio Brasil: $(TZ=America/Sao_Paulo date +"%Y-%m-%d %H:%M:%S %Z")"
